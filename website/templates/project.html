<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width,initial-scale=1" name="viewport">
  <meta content="description" name="description">
  <meta name="google" content="notranslate" />
  <meta content="Mashup templates have been developped by Orson.io team" name="author">

  <!-- Disable tap highlight on IE -->
  <meta name="msapplication-tap-highlight" content="no">
  
  <link href="./assets/apple-icon-180x180.png" rel="apple-touch-icon">
  <link href="./assets/favicon.ico" rel="icon">



  <title>StorybookHub</title>  
 
  <link href="{{ url_for('static', filename='css/main.82cfd66e.css') }}" rel="stylesheet" />

<body>

 <!-- Add your content of header -->
<header class="">
  <div class="navbar navbar-default visible-xs">
    <button type="button" class="navbar-toggle collapsed">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a href="./index.html" class="navbar-brand">Mashup Template</a>
  </div>

  <nav class="sidebar">
    <div class="navbar-collapse" id="navbar-collapse">
      <div class="site-header hidden-xs">
          <a class="site-brand" href="./index.html" title="">
            <img class="img-responsive site-logo" alt="" src="./assets/images/mashup-logo.svg">
            Mashup Template
          </a>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
        tempor.</p>
      </div>
      <ul class="nav">
        <li><a href="/" title="">Home</a></li>
        <li><a href="/creator" title="">Story Creator</a></li>
        <li><a href="/services" title="">Services</a></li>
        <li><a href="/contact" title="">Login/Sign up</a></li>
        <li><a href="/components" title="">Components</a></li>
        <!-- 其他連結... -->
        <li id="logout-li" style="display: none;"><a href="#" id="logout-link">Log out</a></li>
      </ul>

      <nav class="nav-footer">
        <p class="nav-footer-social-buttons">
          <a class="fa-icon" href="https://www.instagram.com/" title="">
            <i class="fa fa-instagram"></i>
          </a>
          <a class="fa-icon" href="https://dribbble.com/" title="">
            <i class="fa fa-dribbble"></i>
          </a>
          <a class="fa-icon" href="https://twitter.com/" title="">
            <i class="fa fa-twitter"></i>
          </a>
        </p>
        <p>© Untitled | Website created with <a href="http://www.mashup-template.com/" title="Create website with free html template">Mashup Template</a>/<a href="https://www.unsplash.com/" title="Beautiful Free Images">Unsplash</a></p>
      </nav>  
    </div> 
  </nav>
</header>
<main class="" id="main-collapse">


<div class="row">
  <div class="col-xs-12 col-md-8">

    <div class="section-container-spacer">

    </div>

      <div class="section-container-spacer">
        <div id="story-images-container" class="row">
          <!-- 图片将动态加载到这里 -->
        </div>
      <div class="left-arrow arrow" onclick="showPreviousImage()">&lt;</div>
      <div class="right-arrow arrow" onclick="showNextImage()">&gt;</div>
    </div>
    

    <p> Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

    <div id="audio-container">
      <!-- 音檔将动态加载到这里 -->
    </div>

    
  </div>

</div>
    


</main>

  
<script src="https://www.gstatic.com/firebasejs/5.0.0/firebase-app.js"></script>

<script src="https://www.gstatic.com/firebasejs/5.0.0/firebase-database.js"></script>
<script src="{{ url_for('static', filename='hello-world/public/controller/config.js') }}"></script>
<script src="{{ url_for('static', filename='hello-world/public/controller/userStatus.js') }}"></script>
<script src="{{ url_for('static', filename='hello-world/public/controller/insert.js') }}"></script>

<script src="{{ url_for('static', filename='js/main.85741bff.js') }}"></script>
<script>
  document.addEventListener("DOMContentLoaded", function (event) {
    navbarToggleSidebar();
    navActivePage();
  



    const isLoggedIn = localStorage.getItem("username");

    // 根據登入狀態顯示或隱藏登出按鈕
    const logoutLi = document.getElementById("logout-li");
    if (isLoggedIn) {
      logoutLi.style.display = "block";
    } else {
      logoutLi.style.display = "none";
    }

    // 登出按鈕的點擊事件
    const logoutLink = document.getElementById("logout-link");
    logoutLink.addEventListener("click", function (event) {
      event.preventDefault();
      // 清除本地存儲的登入狀態
      localStorage.removeItem("username");
      // 導向登入頁面
      alert("You have been logged out.")
      window.location.href = "/";
    });
    
  });

  function showNextImage() {
    currentImageIndex = (currentImageIndex + 1) % storyImages.length;
    displayImage(currentImageIndex);
  }

  function showPreviousImage() {
    currentImageIndex = (currentImageIndex - 1 + storyImages.length) % storyImages.length;
    displayImage(currentImageIndex);
  }



  let currentImageIndex = 0;
  let storyImages = [];
  let storyAudios = [];


  function loadStory() {
    const story = JSON.parse(localStorage.getItem('selectedStory'));
    console.log(story);
    if (story && story.stories) {
      storyImages = story.stories.map(paragraph => paragraph.img);
      storyAudios = story.stories.map(paragraph => paragraph.soundtrack);
      storyWord = story.stories.map(paragraph => paragraph.language);
      console.log("story image", storyImages);
      if (storyImages.length > 0) {
        displayImage(currentImageIndex);
        updateAudio(currentImageIndex);
        displayStories(currentImageIndex);
      } else {
        console.error('No images found for the selected story.');
      }
    } else {
      console.error('No story found in localStorage or story has no images.');
    }
  }
  function displayStories(index) {
    const container = document.getElementById('section-container-spacer');
    container.innerHTML = `
    <div class="col-xs-12">
        <h2>${index.title || 'Project'}</h2>
        <p>${index.text || 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.'}</p>
    `;
  }
  function displayImage(index) {
    const container = document.getElementById('story-images-container');
    container.innerHTML = `
      <div class="col-xs-12">
        <p><img class="img-responsive" alt="Story Image" src="${storyImages[index]}" onclick="showNextImage()"></p>
      </div>
    `;
  }
  function updateAudio(index) {
    const audioContainer = document.getElementById('audio-container');
        audioContainer.innerHTML = `
            <audio controls>
                <source src="${storyAudios[index]}" type="audio/mpeg">
                Your browser does not support the audio element.
            </audio>
        `;
}
  loadStory();
</script>

  <style>
    .img-responsive {
      
    }
    .arrow {
      background-color: rgba(255, 255, 255, 0.5);
      border: none;
      color: black;
      font-size: 20px;
      padding: 10px 15px;
      cursor: pointer;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 999;
    }
    .left-arrow {
      left: 5px; /* 將左箭頭放在圖片的左側 */
    }
    .right-arrow {
      right: 5px; /* 將右箭頭放在圖片的右側 */
    }
    .arrow:hover {
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
    }

  </style>
  <script type="text/javascript" src="./main.85741bff.js"></script></body>

</html>